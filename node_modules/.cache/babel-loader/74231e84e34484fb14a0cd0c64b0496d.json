{"ast":null,"code":"import _defineProperty from\"D:/myreact/triumphblog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"D:/myreact/triumphblog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:/myreact/triumphblog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{useParams}from\"react-router-dom\";import{Redirect}from\"react-router\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var EditPost=function EditPost(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),submitted=_useState2[0],setSubmitted=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),posts=_useState4[0],setPosts=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),value=_useState6[0],setValue=_useState6[1];var _useParams=useParams(),id=_useParams.id;/*const {id,title,content} = useParams();*/ /*const inputTitle = title.replace(':','');\r\n    const inputContent = content.replace(':','');*/ /*const [value, setValue] = useState({\r\n        postTitle:inputTitle,\r\n        postContent:inputContent\r\n    });*/var postId=id.replace(\":\",\"\");console.log(postId);console.log(props);var fetchData=function fetchData(){// axios.get(\"http://localhost:3000/posts/\"+postId)\naxios.get(\"\".concat(props.apiurl,\"posts/\").concat(postId)).then(function(res){var pdata=res.data;return setPosts(pdata);});};useEffect(function(){fetchData();},[]);var onChangeHandler=function onChangeHandler(e){setValue(_objectSpread(_objectSpread({},value),{},_defineProperty({},e.target.name,e.target.value)));};var postData=function postData(){// axios.patch(\"http://localhost:3000/posts/\"+postId,{\naxios.patch(\"\".concat(props.apiurl,\"posts/\").concat(postId),{title:value.postTitle,content:value.postContent,thumbnail:value.postThumbnail}).then(function(res){setSubmitted(true);var pdata=res.data;console.log(pdata);return setPosts(pdata);});};var onSubmitHandler=function onSubmitHandler(e){e.preventDefault();console.log(\"submitted\");postData();};if(submitted){return/*#__PURE__*/_jsx(Redirect,{push:true,to:{pathname:\"/\"}});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"mb-5\",children:\"Edit Blog Post Here\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmitHandler,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-4\",children:[/*#__PURE__*/_jsx(\"labe\",{children:\"Blog title\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"postTitle\",className:\"form-control\",required:true,defaultValue:posts.title,onChange:onChangeHandler})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-4\",children:[/*#__PURE__*/_jsx(\"labe\",{children:\"Blog content\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"postContent\",className:\"form-control\",required:true,defaultValue:posts.content,onChange:onChangeHandler})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-4\",children:[/*#__PURE__*/_jsx(\"labe\",{children:\"Blog thumbnail URL\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"postThumbnail\",className:\"form-control\",required:true,defaultValue:posts.thumbnail,onChange:onChangeHandler})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-end\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-info\",children:\"Submit Post\"})})]})]});};export default EditPost;","map":{"version":3,"sources":["D:/myreact/triumphblog/src/components/EditPost.js"],"names":["React","useState","useEffect","useParams","Redirect","axios","EditPost","props","submitted","setSubmitted","posts","setPosts","value","setValue","id","postId","replace","console","log","fetchData","get","apiurl","then","res","pdata","data","onChangeHandler","e","target","name","postData","patch","title","postTitle","content","postContent","thumbnail","postThumbnail","onSubmitHandler","preventDefault","pathname"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { Redirect } from \"react-router\";\r\nimport axios from \"axios\";\r\n\r\nconst EditPost = function (props) {\r\n  const [submitted, setSubmitted] = useState(false);\r\n  const [posts, setPosts] = useState({});\r\n  const [value, setValue] = useState();\r\n  const { id } = useParams();\r\n\r\n  /*const {id,title,content} = useParams();*/\r\n  /*const inputTitle = title.replace(':','');\r\n    const inputContent = content.replace(':','');*/\r\n\r\n  /*const [value, setValue] = useState({\r\n        postTitle:inputTitle,\r\n        postContent:inputContent\r\n    });*/\r\n\r\n  const postId = id.replace(\":\", \"\");\r\n  console.log(postId);\r\n  console.log(props);\r\n\r\n  const fetchData = () => {\r\n    // axios.get(\"http://localhost:3000/posts/\"+postId)\r\n    axios.get(`${props.apiurl}posts/${postId}`).then((res) => {\r\n      const pdata = res.data;\r\n      return setPosts(pdata);\r\n    });\r\n  };\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, []);\r\n\r\n  const onChangeHandler = (e) => {\r\n    setValue({\r\n      ...value,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  const postData = () => {\r\n    // axios.patch(\"http://localhost:3000/posts/\"+postId,{\r\n    axios\r\n      .patch(`${props.apiurl}posts/${postId}`, {\r\n        title: value.postTitle,\r\n        content: value.postContent,\r\n        thumbnail: value.postThumbnail,\r\n      })\r\n      .then((res) => {\r\n        setSubmitted(true);\r\n        const pdata = res.data;\r\n        console.log(pdata);\r\n        return setPosts(pdata);\r\n      });\r\n  };\r\n  const onSubmitHandler = (e) => {\r\n    e.preventDefault();\r\n\r\n    console.log(\"submitted\");\r\n    postData();\r\n  };\r\n  if (submitted) {\r\n    return (\r\n      <Redirect\r\n        push\r\n        to={{\r\n          pathname: \"/\",\r\n        }}\r\n      />\r\n    );\r\n  }\r\n  return (\r\n    <>\r\n      <h2 className=\"mb-5\">Edit Blog Post Here</h2>\r\n      <form onSubmit={onSubmitHandler}>\r\n        <div className=\"form-group mb-4\">\r\n          <labe>Blog title</labe>\r\n          <input\r\n            type=\"text\"\r\n            name=\"postTitle\"\r\n            className=\"form-control\"\r\n            required\r\n            defaultValue={posts.title}\r\n            onChange={onChangeHandler}\r\n          />\r\n        </div>\r\n        <div className=\"form-group mb-4\">\r\n          <labe>Blog content</labe>\r\n          <textarea\r\n            name=\"postContent\"\r\n            className=\"form-control\"\r\n            required\r\n            defaultValue={posts.content}\r\n            onChange={onChangeHandler}\r\n          ></textarea>\r\n        </div>\r\n        <div className=\"form-group mb-4\">\r\n          <labe>Blog thumbnail URL</labe>\r\n          <input\r\n            type=\"text\"\r\n            name=\"postThumbnail\"\r\n            className=\"form-control\"\r\n            required\r\n            defaultValue={posts.thumbnail}\r\n            onChange={onChangeHandler}\r\n          />\r\n        </div>\r\n        <p className=\"text-end\">\r\n          <button className=\"btn btn-info\">Submit Post</button>\r\n        </p>\r\n      </form>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default EditPost;\r\n"]},"metadata":{},"sourceType":"module"}