{"ast":null,"code":"import _slicedToArray from\"D:/myreact/triumphblog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Link}from\"react-router-dom\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var AdminPostList=function AdminPostList(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),posts=_useState2[0],setPosts=_useState2[1];function fetchData(){// const res = await fetch(\"http://localhost:3000/posts\");\n// const data = await res.json();\n// return setPosts(data);\nif(sessionStorage.getItem(\"role\")===\"user\"){axios.get(\"\".concat(props.apiurl,\"posts?author=\").concat(sessionStorage.getItem(\"username\"))).then(function(res){var pdata=res.data;return setPosts(pdata);});}else{axios.get(\"\".concat(props.apiurl,\"posts\")).then(function(res){var pdata=res.data;return setPosts(pdata);});}}useEffect(function(){fetchData();console.log(\"after posts\"+posts);},[]);return/*#__PURE__*/_jsx(_Fragment,{children:posts.slice(0).reverse().map(function(item){return/*#__PURE__*/_jsx(\"article\",{className:\"card mb-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-header\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"h4 post-title\",children:/*#__PURE__*/_jsx(Link,{to:\"edit-post/:\".concat(item.id),children:item.title})}),/*#__PURE__*/_jsx(Link,{to:\"edit-post/:\".concat(item.id),children:\" Edit\"}),\" \\xA0\",/*#__PURE__*/_jsx(Link,{to:\"delete-post/:\".concat(item.id),children:\" Delete\"})]})},item.id);})});};export default AdminPostList;","map":{"version":3,"sources":["D:/myreact/triumphblog/src/components/admin/AdminPostList.js"],"names":["React","useState","useEffect","Link","axios","AdminPostList","props","posts","setPosts","fetchData","sessionStorage","getItem","get","apiurl","then","res","pdata","data","console","log","slice","reverse","map","item","id","title"],"mappings":"6IAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,6IAEA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAAUC,KAAV,CAAiB,CACrC,cAA0BL,QAAQ,CAAC,EAAD,CAAlC,wCAAOM,KAAP,eAAcC,QAAd,eAEA,QAASC,CAAAA,SAAT,EAAqB,CACnB;AACA;AAEA;AACA,GAAIC,cAAc,CAACC,OAAf,CAAuB,MAAvB,IAAmC,MAAvC,CAA+C,CAC7CP,KAAK,CACFQ,GADH,WAEON,KAAK,CAACO,MAFb,yBAEmCH,cAAc,CAACC,OAAf,CAAuB,UAAvB,CAFnC,GAIGG,IAJH,CAIQ,SAACC,GAAD,CAAS,CACb,GAAMC,CAAAA,KAAK,CAAGD,GAAG,CAACE,IAAlB,CACA,MAAOT,CAAAA,QAAQ,CAACQ,KAAD,CAAf,CACD,CAPH,EAQD,CATD,IASO,CACLZ,KAAK,CAACQ,GAAN,WAAaN,KAAK,CAACO,MAAnB,WAAkCC,IAAlC,CAAuC,SAACC,GAAD,CAAS,CAC9C,GAAMC,CAAAA,KAAK,CAAGD,GAAG,CAACE,IAAlB,CACA,MAAOT,CAAAA,QAAQ,CAACQ,KAAD,CAAf,CACD,CAHD,EAID,CACF,CACDd,SAAS,CAAC,UAAM,CACdO,SAAS,GACTS,OAAO,CAACC,GAAR,CAAY,cAAgBZ,KAA5B,EACD,CAHQ,CAGN,EAHM,CAAT,CAKA,mBACE,yBACGA,KAAK,CACHa,KADF,CACQ,CADR,EAEEC,OAFF,GAGEC,GAHF,CAGM,SAACC,IAAD,CAAU,CACb,mBACE,gBAAS,SAAS,CAAC,WAAnB,uBACE,aAAK,SAAS,CAAC,aAAf,wBACE,WAAI,SAAS,CAAC,eAAd,uBACE,KAAC,IAAD,EAAM,EAAE,sBAAgBA,IAAI,CAACC,EAArB,CAAR,UAAoCD,IAAI,CAACE,KAAzC,EADF,EADF,cAKE,KAAC,IAAD,EAAM,EAAE,sBAAgBF,IAAI,CAACC,EAArB,CAAR,mBALF,sBAME,KAAC,IAAD,EAAM,EAAE,wBAAkBD,IAAI,CAACC,EAAvB,CAAR,qBANF,GADF,EAAoCD,IAAI,CAACC,EAAzC,CADF,CAYD,CAhBF,CADH,EADF,CAqBD,CAlDD,CAoDA,cAAenB,CAAAA,aAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\n\r\nconst AdminPostList = function (props) {\r\n  const [posts, setPosts] = useState([]);\r\n\r\n  function fetchData() {\r\n    // const res = await fetch(\"http://localhost:3000/posts\");\r\n    // const data = await res.json();\r\n\r\n    // return setPosts(data);\r\n    if (sessionStorage.getItem(\"role\") === \"user\") {\r\n      axios\r\n        .get(\r\n          `${props.apiurl}posts?author=${sessionStorage.getItem(\"username\")}`\r\n        )\r\n        .then((res) => {\r\n          const pdata = res.data;\r\n          return setPosts(pdata);\r\n        });\r\n    } else {\r\n      axios.get(`${props.apiurl}posts`).then((res) => {\r\n        const pdata = res.data;\r\n        return setPosts(pdata);\r\n      });\r\n    }\r\n  }\r\n  useEffect(() => {\r\n    fetchData();\r\n    console.log(\"after posts\" + posts);\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      {posts\r\n        .slice(0)\r\n        .reverse()\r\n        .map((item) => {\r\n          return (\r\n            <article className=\"card mb-4\" key={item.id}>\r\n              <div className=\"card-header\">\r\n                <h2 className=\"h4 post-title\">\r\n                  <Link to={`edit-post/:${item.id}`}>{item.title}</Link>\r\n                </h2>\r\n                {/* <Link to={`edit-post/:${item.id}/:${item.title}/:${item.content}`}>edit</Link> */}\r\n                <Link to={`edit-post/:${item.id}`}> Edit</Link> &nbsp;\r\n                <Link to={`delete-post/:${item.id}`}> Delete</Link>\r\n              </div>\r\n            </article>\r\n          );\r\n        })}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default AdminPostList;\r\n"]},"metadata":{},"sourceType":"module"}