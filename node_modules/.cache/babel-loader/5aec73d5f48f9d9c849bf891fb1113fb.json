{"ast":null,"code":"import _defineProperty from\"C:/myreact/triumphblog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:/myreact/triumphblog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/myreact/triumphblog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useParams}from'react-router-dom';import{Redirect}from'react-router';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var EditPost=function EditPost(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),submitted=_useState2[0],setSubmitted=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),posts=_useState4[0],setPosts=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),value=_useState6[0],setValue=_useState6[1];var _useParams=useParams(),id=_useParams.id;/*const {id,title,content} = useParams();*/ /*const inputTitle = title.replace(':','');\r\n    const inputContent = content.replace(':','');*/ /*const [value, setValue] = useState({\r\n        postTitle:inputTitle,\r\n        postContent:inputContent\r\n    });*/var postId=id.replace(':','');console.log(postId);var fetchData=function fetchData(){axios.get(\"http://localhost:3000/posts/\"+postId).then(function(res){var pdata=res.data;return setPosts(pdata);});};useEffect(function(){fetchData();},[]);var onChangeHandler=function onChangeHandler(e){setValue(_objectSpread(_objectSpread({},value),{},_defineProperty({},e.target.name,e.target.value)));};var postData=function postData(){axios.patch(\"http://localhost:3000/posts/\"+postId,{title:value.postTitle,content:value.postContent}).then(function(res){setSubmitted(true);var pdata=res.data;console.log(pdata);return setPosts(pdata);});};var onSubmitHandler=function onSubmitHandler(e){e.preventDefault();console.log('submitted');postData();};if(submitted){return/*#__PURE__*/_jsx(Redirect,{push:true,to:{pathname:'/'}});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"mb-5\",children:\"Edit Blog Post Here\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmitHandler,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-4\",children:[/*#__PURE__*/_jsx(\"labe\",{children:\"Blog title\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"postTitle\",className:\"form-control\",required:true,defaultValue:posts.title,onChange:onChangeHandler})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-4\",children:[/*#__PURE__*/_jsx(\"labe\",{children:\"Blog content\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"postContent\",className:\"form-control\",required:true,defaultValue:posts.content,onChange:onChangeHandler})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-end\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-info\",children:\"Submit Post\"})})]})]});};export default EditPost;","map":{"version":3,"sources":["C:/myreact/triumphblog/src/components/EditPost.js"],"names":["React","useState","useEffect","useParams","Redirect","axios","EditPost","props","submitted","setSubmitted","posts","setPosts","value","setValue","id","postId","replace","console","log","fetchData","get","then","res","pdata","data","onChangeHandler","e","target","name","postData","patch","title","postTitle","content","postContent","onSubmitHandler","preventDefault","pathname"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from 'react';\r\nimport {useParams} from 'react-router-dom';\r\nimport { Redirect } from 'react-router';\r\nimport axios from 'axios';\r\n\r\nconst EditPost = function(props){\r\n    const [submitted, setSubmitted] = useState(false);\r\n    const [posts, setPosts] = useState({});\r\n    const [value, setValue] = useState();\r\n    const {id} = useParams();\r\n    \r\n    /*const {id,title,content} = useParams();*/\r\n    /*const inputTitle = title.replace(':','');\r\n    const inputContent = content.replace(':','');*/\r\n    \r\n    /*const [value, setValue] = useState({\r\n        postTitle:inputTitle,\r\n        postContent:inputContent\r\n    });*/   \r\n\r\n\r\n    const postId = id.replace(':','');\r\n    console.log(postId);\r\n\r\n   \r\n\r\n    const fetchData = () =>{\r\n        axios.get(\"http://localhost:3000/posts/\"+postId)\r\n        .then(res => {\r\n            const pdata = res.data;\r\n            return setPosts(pdata);\r\n          })\r\n    }\r\n    useEffect(() =>{\r\n        fetchData();    \r\n    },[]);\r\n\r\n    const onChangeHandler = (e) =>{\r\n        setValue({\r\n            ...value,\r\n            [e.target.name]: e.target.value\r\n        });\r\n        \r\n    }\r\n\r\n    const postData = () =>{\r\n\r\n        axios.patch(\"http://localhost:3000/posts/\"+postId,{\r\n            title: value.postTitle,\r\n            content: value.postContent            \r\n        })\r\n        .then((res)=>{\r\n            setSubmitted(true);\r\n            const pdata = res.data;\r\n            console.log(pdata);\r\n            return setPosts(pdata);\r\n        })\r\n    }\r\n    const onSubmitHandler= (e) =>{\r\n        e.preventDefault();\r\n        console.log('submitted');\r\n        postData();\r\n        \r\n    }\r\n    if (submitted) {\r\n        return <Redirect push to={{\r\n          pathname: '/'\r\n        }}\r\n        />\r\n      } \r\n    return <>\r\n        <h2 className=\"mb-5\">Edit Blog Post Here</h2>\r\n        <form onSubmit = {onSubmitHandler}>\r\n            <div className=\"form-group mb-4\">\r\n                <labe>Blog title</labe>\r\n                <input type=\"text\" name=\"postTitle\" className=\"form-control\" required defaultValue={posts.title} onChange={onChangeHandler}/>\r\n            </div>\r\n            <div className=\"form-group mb-4\">\r\n                <labe>Blog content</labe>\r\n                <textarea name=\"postContent\" className=\"form-control\" required defaultValue={posts.content} onChange={onChangeHandler}></textarea>\r\n            </div>\r\n            <p className=\"text-end\"><button className=\"btn btn-info\">Submit Post</button></p>\r\n        </form>\r\n    </>\r\n}\r\n\r\nexport default EditPost;"]},"metadata":{},"sourceType":"module"}