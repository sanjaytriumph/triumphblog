{"ast":null,"code":"import _slicedToArray from\"D:/myreact/triumphblog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{useParams}from\"react-router-dom\";import{Link}from\"react-router-dom\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var PostByAuthor=function PostByAuthor(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),posts=_useState2[0],setPosts=_useState2[1];var _useParams=useParams(),author=_useParams.author;var postAuthor=author.replace(\":\",\"\");//console.log(postId);\n//const apiURL = 'http://localhost:3000/posts?id='+postId;\n//const apiURL = `${props.apiurl}posts?id=${postId}`;\nvar apiURL=\"\".concat(props.apiurl,\"posts?author=\").concat(postAuthor);//console.log(apiURL);\nvar fetchData=function fetchData(){axios.get(apiURL).then(function(res){var pdata=res.data;return setPosts(pdata);});};useEffect(function(){fetchData();},[]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"container pt-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:posts.slice(0).reverse().map(function(item){var content=item.content;console.log(content.length);if(content.length>100){content=content.substr(0,100)+\"...\";}return/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",children:/*#__PURE__*/_jsxs(\"article\",{className:\"card mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header p-0\",children:/*#__PURE__*/_jsx(\"img\",{className:\"img-fluid\",src:item.thumbnail,alt:\"\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body article-content\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"h4 post-title\",children:/*#__PURE__*/_jsx(Link,{to:\"post-detail/:\".concat(item.id),children:item.title})}),content,content.length>100?/*#__PURE__*/_jsx(\"p\",{className:\"text-end mt-3\",children:/*#__PURE__*/_jsx(Link,{className:\"btn btn-primary btn-sm\",to:\"/post-detail/:\".concat(item.id),children:\"Read More\"})}):\"\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-footer\",children:[\"Author:\",/*#__PURE__*/_jsx(Link,{to:\"/author/:\".concat(item.author),children:item.author})]})]})},item.id);})})})});};export default PostByAuthor;","map":{"version":3,"sources":["D:/myreact/triumphblog/src/components/PostByAuthor.js"],"names":["React","useState","useEffect","useParams","Link","axios","PostByAuthor","props","posts","setPosts","author","postAuthor","replace","apiURL","apiurl","fetchData","get","then","res","pdata","data","slice","reverse","map","item","content","console","log","length","substr","thumbnail","id","title"],"mappings":"6IAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,SAAT,KAA0B,kBAA1B,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,6IAEA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAAUC,KAAV,CAAiB,CACpC,cAA0BN,QAAQ,CAAC,EAAD,CAAlC,wCAAOO,KAAP,eAAcC,QAAd,eAEA,eAAmBN,SAAS,EAA5B,CAAQO,MAAR,YAAQA,MAAR,CACA,GAAMC,CAAAA,UAAU,CAAGD,MAAM,CAACE,OAAP,CAAe,GAAf,CAAoB,EAApB,CAAnB,CACA;AAEA;AAEA;AACA,GAAMC,CAAAA,MAAM,WAAMN,KAAK,CAACO,MAAZ,yBAAkCH,UAAlC,CAAZ,CACA;AACA,GAAMI,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAY,CAC5BV,KAAK,CAACW,GAAN,CAAUH,MAAV,EAAkBI,IAAlB,CAAuB,SAACC,GAAD,CAAS,CAC9B,GAAMC,CAAAA,KAAK,CAAGD,GAAG,CAACE,IAAlB,CACA,MAAOX,CAAAA,QAAQ,CAACU,KAAD,CAAf,CACD,CAHD,EAID,CALD,CAOAjB,SAAS,CAAC,UAAM,CACda,SAAS,GACV,CAFQ,CAEN,EAFM,CAAT,CAIA,mBACE,sCACE,YAAK,SAAS,CAAC,gBAAf,uBACE,YAAK,SAAS,CAAC,KAAf,UACGP,KAAK,CACHa,KADF,CACQ,CADR,EAEEC,OAFF,GAGEC,GAHF,CAGM,SAACC,IAAD,CAAU,CACb,GAAIC,CAAAA,OAAO,CAAGD,IAAI,CAACC,OAAnB,CACAC,OAAO,CAACC,GAAR,CAAYF,OAAO,CAACG,MAApB,EACA,GAAIH,OAAO,CAACG,MAAR,CAAiB,GAArB,CAA0B,CACxBH,OAAO,CAAGA,OAAO,CAACI,MAAR,CAAe,CAAf,CAAkB,GAAlB,EAAyB,KAAnC,CACD,CACD,mBACE,YAAK,SAAS,CAAC,UAAf,uBACE,iBAAS,SAAS,CAAC,WAAnB,wBACE,YAAK,SAAS,CAAC,iBAAf,uBAEE,YAAK,SAAS,CAAC,WAAf,CAA2B,GAAG,CAAEL,IAAI,CAACM,SAArC,CAAgD,GAAG,CAAC,EAApD,EAFF,EADF,cAKE,aAAK,SAAS,CAAC,2BAAf,wBACE,WAAI,SAAS,CAAC,eAAd,uBACE,KAAC,IAAD,EAAM,EAAE,wBAAkBN,IAAI,CAACO,EAAvB,CAAR,UAAsCP,IAAI,CAACQ,KAA3C,EADF,EADF,CAIGP,OAJH,CAKGA,OAAO,CAACG,MAAR,CAAiB,GAAjB,cACC,UAAG,SAAS,CAAC,eAAb,uBACE,KAAC,IAAD,EACE,SAAS,CAAC,wBADZ,CAEE,EAAE,yBAAmBJ,IAAI,CAACO,EAAxB,CAFJ,uBADF,EADD,CAUC,EAfJ,GALF,cAuBE,aAAK,SAAS,CAAC,aAAf,kCAEE,KAAC,IAAD,EAAM,EAAE,oBAAcP,IAAI,CAACd,MAAnB,CAAR,UAAsCc,IAAI,CAACd,MAA3C,EAFF,GAvBF,GADF,EAA+Bc,IAAI,CAACO,EAApC,CADF,CAgCD,CAzCF,CADH,EADF,EADF,EADF,CAkDD,CAzED,CA2EA,cAAezB,CAAAA,YAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { Link } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\n\r\nconst PostByAuthor = function (props) {\r\n  const [posts, setPosts] = useState([]);\r\n\r\n  const { author } = useParams();\r\n  const postAuthor = author.replace(\":\", \"\");\r\n  //console.log(postId);\r\n\r\n  //const apiURL = 'http://localhost:3000/posts?id='+postId;\r\n\r\n  //const apiURL = `${props.apiurl}posts?id=${postId}`;\r\n  const apiURL = `${props.apiurl}posts?author=${postAuthor}`;\r\n  //console.log(apiURL);\r\n  const fetchData = function () {\r\n    axios.get(apiURL).then((res) => {\r\n      const pdata = res.data;\r\n      return setPosts(pdata);\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <div className=\"container pt-3\">\r\n        <div className=\"row\">\r\n          {posts\r\n            .slice(0)\r\n            .reverse()\r\n            .map((item) => {\r\n              let content = item.content;\r\n              console.log(content.length);\r\n              if (content.length > 100) {\r\n                content = content.substr(0, 100) + \"...\";\r\n              }\r\n              return (\r\n                <div className=\"col-md-4\" key={item.id}>\r\n                  <article className=\"card mb-4\">\r\n                    <div className=\"card-header p-0\">\r\n                      {/* <Link to={`edit-post/:${item.id}/:${item.title}/:${item.content}`}>edit</Link> */}\r\n                      <img className=\"img-fluid\" src={item.thumbnail} alt=\"\" />\r\n                    </div>\r\n                    <div className=\"card-body article-content\">\r\n                      <h2 className=\"h4 post-title\">\r\n                        <Link to={`post-detail/:${item.id}`}>{item.title}</Link>\r\n                      </h2>\r\n                      {content}\r\n                      {content.length > 100 ? (\r\n                        <p className=\"text-end mt-3\">\r\n                          <Link\r\n                            className=\"btn btn-primary btn-sm\"\r\n                            to={`/post-detail/:${item.id}`}\r\n                          >\r\n                            Read More\r\n                          </Link>\r\n                        </p>\r\n                      ) : (\r\n                        \"\"\r\n                      )}\r\n                    </div>\r\n                    <div className=\"card-footer\">\r\n                      Author:\r\n                      <Link to={`/author/:${item.author}`}>{item.author}</Link>\r\n                    </div>\r\n                  </article>\r\n                </div>\r\n              );\r\n            })}\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default PostByAuthor;\r\n"]},"metadata":{},"sourceType":"module"}