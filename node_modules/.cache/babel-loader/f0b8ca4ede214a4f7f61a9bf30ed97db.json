{"ast":null,"code":"import _defineProperty from\"D:/myreact/triumphblog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"D:/myreact/triumphblog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:/myreact/triumphblog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{Redirect}from\"react-router\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var AddPost=function AddPost(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),posts=_useState2[0],setPosts=_useState2[1];var _useState3=useState({postTitle:\"\",postContent:\"\",postThumbnail:\"\"}),_useState4=_slicedToArray(_useState3,2),value=_useState4[0],setValue=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),submitted=_useState6[0],setSubmitted=_useState6[1];var onChangeHandler=function onChangeHandler(e){// console.log(e.target.value)\n// e.target.name = e.target.value;\nsetValue(_objectSpread(_objectSpread({},value),{},_defineProperty({},e.target.name,e.target.value)));};var onSubmitHandler=function onSubmitHandler(e){e.preventDefault();var requestOptions={title:value.postTitle,content:value.postContent,thumbnail:value.postThumbnail,author:sessionStorage.getItem(\"username\")};console.log(requestOptions);axios.post(\"\".concat(props.apiurl,\"posts\"),requestOptions).then(function(res){setSubmitted(true);var pdata=res.data;return setPosts(pdata);});};if(submitted){return/*#__PURE__*/_jsx(Redirect,{push:true,to:{pathname:\"/\"}});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"mb-5\",children:\"Add Blog Post Here\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmitHandler,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Blog title\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"postTitle\",className:\"form-control\",required:true,onChange:onChangeHandler})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Blog content\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"postContent\",className:\"form-control\",required:true,onChange:onChangeHandler})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Blog thumbnail URL (\\\"Eg: https://picsum.photos/id/1/900/500\\\")\"}),/*#__PURE__*/_jsx(\"input\",{type:\"url\",name:\"postThumbnail\",className:\"form-control\",required:true,onChange:onChangeHandler})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-end\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-info\",children:\"Submit Post\"})})]})]});};export default AddPost;","map":{"version":3,"sources":["D:/myreact/triumphblog/src/components/AddPost.js"],"names":["React","useState","Redirect","axios","AddPost","props","posts","setPosts","postTitle","postContent","postThumbnail","value","setValue","submitted","setSubmitted","onChangeHandler","e","target","name","onSubmitHandler","preventDefault","requestOptions","title","content","thumbnail","author","sessionStorage","getItem","console","log","post","apiurl","then","res","pdata","data","pathname"],"mappings":"waAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,QAAT,KAAyB,cAAzB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,6IAEA,GAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,CAAUC,KAAV,CAAiB,CAC/B,cAA0BJ,QAAQ,CAAC,EAAD,CAAlC,wCAAOK,KAAP,eAAcC,QAAd,eACA,eAA0BN,QAAQ,CAAC,CACjCO,SAAS,CAAE,EADsB,CAEjCC,WAAW,CAAE,EAFoB,CAGjCC,aAAa,CAAE,EAHkB,CAAD,CAAlC,yCAAOC,KAAP,eAAcC,QAAd,eAKA,eAAkCX,QAAQ,CAAC,KAAD,CAA1C,yCAAOY,SAAP,eAAkBC,YAAlB,eAEA,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACC,CAAD,CAAO,CAC7B;AACA;AACAJ,QAAQ,gCACHD,KADG,wBAELK,CAAC,CAACC,MAAF,CAASC,IAFJ,CAEWF,CAAC,CAACC,MAAF,CAASN,KAFpB,GAAR,CAID,CAPD,CAQA,GAAMQ,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACH,CAAD,CAAO,CAC7BA,CAAC,CAACI,cAAF,GAEA,GAAMC,CAAAA,cAAc,CAAG,CACrBC,KAAK,CAAEX,KAAK,CAACH,SADQ,CAErBe,OAAO,CAAEZ,KAAK,CAACF,WAFM,CAGrBe,SAAS,CAAEb,KAAK,CAACD,aAHI,CAIrBe,MAAM,CAAEC,cAAc,CAACC,OAAf,CAAuB,UAAvB,CAJa,CAAvB,CAMAC,OAAO,CAACC,GAAR,CAAYR,cAAZ,EACAlB,KAAK,CAAC2B,IAAN,WAAczB,KAAK,CAAC0B,MAApB,UAAmCV,cAAnC,EAAmDW,IAAnD,CAAwD,SAACC,GAAD,CAAS,CAC/DnB,YAAY,CAAC,IAAD,CAAZ,CACA,GAAMoB,CAAAA,KAAK,CAAGD,GAAG,CAACE,IAAlB,CACA,MAAO5B,CAAAA,QAAQ,CAAC2B,KAAD,CAAf,CACD,CAJD,EAKD,CAfD,CAgBA,GAAIrB,SAAJ,CAAe,CACb,mBACE,KAAC,QAAD,EACE,IAAI,KADN,CAEE,EAAE,CAAE,CACFuB,QAAQ,CAAE,GADR,CAFN,EADF,CAQD,CACD,mBACE,wCACE,WAAI,SAAS,CAAC,MAAd,gCADF,cAEE,cAAM,QAAQ,CAAEjB,eAAhB,wBACE,aAAK,SAAS,CAAC,iBAAf,wBACE,qCADF,cAEE,cACE,IAAI,CAAC,MADP,CAEE,IAAI,CAAC,WAFP,CAGE,SAAS,CAAC,cAHZ,CAIE,QAAQ,KAJV,CAKE,QAAQ,CAAEJ,eALZ,EAFF,GADF,cAWE,aAAK,SAAS,CAAC,iBAAf,wBACE,uCADF,cAEE,iBACE,IAAI,CAAC,aADP,CAEE,SAAS,CAAC,cAFZ,CAGE,QAAQ,KAHV,CAIE,QAAQ,CAAEA,eAJZ,EAFF,GAXF,cAoBE,aAAK,SAAS,CAAC,iBAAf,wBACE,0FADF,cAIE,cACE,IAAI,CAAC,KADP,CAEE,IAAI,CAAC,eAFP,CAGE,SAAS,CAAC,cAHZ,CAIE,QAAQ,KAJV,CAKE,QAAQ,CAAEA,eALZ,EAJF,GApBF,cAgCE,UAAG,SAAS,CAAC,UAAb,uBACE,eAAQ,SAAS,CAAC,cAAlB,yBADF,EAhCF,GAFF,GADF,CAyCD,CApFD,CAsFA,cAAeX,CAAAA,OAAf","sourcesContent":["import React, { useState } from \"react\";\r\nimport { Redirect } from \"react-router\";\r\nimport axios from \"axios\";\r\n\r\nconst AddPost = function (props) {\r\n  const [posts, setPosts] = useState([]);\r\n  const [value, setValue] = useState({\r\n    postTitle: \"\",\r\n    postContent: \"\",\r\n    postThumbnail: \"\",\r\n  });\r\n  const [submitted, setSubmitted] = useState(false);\r\n\r\n  const onChangeHandler = (e) => {\r\n    // console.log(e.target.value)\r\n    // e.target.name = e.target.value;\r\n    setValue({\r\n      ...value,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n  const onSubmitHandler = (e) => {\r\n    e.preventDefault();\r\n\r\n    const requestOptions = {\r\n      title: value.postTitle,\r\n      content: value.postContent,\r\n      thumbnail: value.postThumbnail,\r\n      author: sessionStorage.getItem(\"username\"),\r\n    };\r\n    console.log(requestOptions);\r\n    axios.post(`${props.apiurl}posts`, requestOptions).then((res) => {\r\n      setSubmitted(true);\r\n      const pdata = res.data;\r\n      return setPosts(pdata);\r\n    });\r\n  };\r\n  if (submitted) {\r\n    return (\r\n      <Redirect\r\n        push\r\n        to={{\r\n          pathname: \"/\",\r\n        }}\r\n      />\r\n    );\r\n  }\r\n  return (\r\n    <>\r\n      <h2 className=\"mb-5\">Add Blog Post Here</h2>\r\n      <form onSubmit={onSubmitHandler}>\r\n        <div className=\"form-group mb-4\">\r\n          <label>Blog title</label>\r\n          <input\r\n            type=\"text\"\r\n            name=\"postTitle\"\r\n            className=\"form-control\"\r\n            required\r\n            onChange={onChangeHandler}\r\n          />\r\n        </div>\r\n        <div className=\"form-group mb-4\">\r\n          <label>Blog content</label>\r\n          <textarea\r\n            name=\"postContent\"\r\n            className=\"form-control\"\r\n            required\r\n            onChange={onChangeHandler}\r\n          ></textarea>\r\n        </div>\r\n        <div className=\"form-group mb-4\">\r\n          <label>\r\n            Blog thumbnail URL (\"Eg: https://picsum.photos/id/1/900/500\")\r\n          </label>\r\n          <input\r\n            type=\"url\"\r\n            name=\"postThumbnail\"\r\n            className=\"form-control\"\r\n            required\r\n            onChange={onChangeHandler}\r\n          />\r\n        </div>\r\n        <p className=\"text-end\">\r\n          <button className=\"btn btn-info\">Submit Post</button>\r\n        </p>\r\n      </form>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default AddPost;\r\n"]},"metadata":{},"sourceType":"module"}