{"ast":null,"code":"import _slicedToArray from\"D:/myreact/triumphblog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Link}from\"react-router-dom\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var PostList=function PostList(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),posts=_useState2[0],setPosts=_useState2[1];function fetchData(){// const res = await fetch(\"http://localhost:3000/posts\");\n// const data = await res.json();\n// return setPosts(data);\naxios.get(\"\".concat(props.apiurl,\"posts\")).then(function(res){var pdata=res.data;return setPosts(pdata);});}useEffect(function(){fetchData();console.log(\"after posts\"+posts);},[]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{class:\"row\",children:posts.slice(0).reverse().map(function(item){var content=item.content;console.log(content.length);if(content.length>100){content=content.substr(0,100)+\"...\";}return/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",children:/*#__PURE__*/_jsxs(\"article\",{className:\"card mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header p-0\",children:/*#__PURE__*/_jsx(\"img\",{className:\"img-fluid\",src:item.thumbnail,alt:\"\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body article-content\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"h4 post-title\",children:/*#__PURE__*/_jsx(Link,{to:\"post-detail/:\".concat(item.id),children:item.title})}),content,content.length>100?/*#__PURE__*/_jsx(\"p\",{className:\"text-end mt-3\",children:/*#__PURE__*/_jsx(Link,{className:\"btn btn-primary btn-sm\",to:\"post-detail/:\".concat(item.id),children:\"Read More\"})}):\"\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-footer\",children:[\"Author:\",/*#__PURE__*/_jsx(Link,{to:\"author/:\".concat(item.author),children:item.author})]})]})},item.id);})})})});};export default PostList;","map":{"version":3,"sources":["D:/myreact/triumphblog/src/components/PostList.js"],"names":["React","useState","useEffect","Link","axios","PostList","props","posts","setPosts","fetchData","get","apiurl","then","res","pdata","data","console","log","slice","reverse","map","item","content","length","substr","thumbnail","id","title","author"],"mappings":"6IAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,6IAEA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAAUC,KAAV,CAAiB,CAChC,cAA0BL,QAAQ,CAAC,EAAD,CAAlC,wCAAOM,KAAP,eAAcC,QAAd,eAEA,QAASC,CAAAA,SAAT,EAAqB,CACnB;AACA;AAEA;AACAL,KAAK,CAACM,GAAN,WAAaJ,KAAK,CAACK,MAAnB,WAAkCC,IAAlC,CAAuC,SAACC,GAAD,CAAS,CAC9C,GAAMC,CAAAA,KAAK,CAAGD,GAAG,CAACE,IAAlB,CACA,MAAOP,CAAAA,QAAQ,CAACM,KAAD,CAAf,CACD,CAHD,EAID,CACDZ,SAAS,CAAC,UAAM,CACdO,SAAS,GACTO,OAAO,CAACC,GAAR,CAAY,cAAgBV,KAA5B,EACD,CAHQ,CAGN,EAHM,CAAT,CAKA,mBACE,sCACE,YAAK,SAAS,CAAC,WAAf,uBACE,YAAK,KAAK,CAAC,KAAX,UACGA,KAAK,CACHW,KADF,CACQ,CADR,EAEEC,OAFF,GAGEC,GAHF,CAGM,SAACC,IAAD,CAAU,CACb,GAAIC,CAAAA,OAAO,CAAGD,IAAI,CAACC,OAAnB,CACAN,OAAO,CAACC,GAAR,CAAYK,OAAO,CAACC,MAApB,EACA,GAAID,OAAO,CAACC,MAAR,CAAiB,GAArB,CAA0B,CACxBD,OAAO,CAAGA,OAAO,CAACE,MAAR,CAAe,CAAf,CAAkB,GAAlB,EAAyB,KAAnC,CACD,CACD,mBACE,YAAK,SAAS,CAAC,UAAf,uBACE,iBAAS,SAAS,CAAC,WAAnB,wBACE,YAAK,SAAS,CAAC,iBAAf,uBAEE,YAAK,SAAS,CAAC,WAAf,CAA2B,GAAG,CAAEH,IAAI,CAACI,SAArC,CAAgD,GAAG,CAAC,EAApD,EAFF,EADF,cAKE,aAAK,SAAS,CAAC,2BAAf,wBACE,WAAI,SAAS,CAAC,eAAd,uBACE,KAAC,IAAD,EAAM,EAAE,wBAAkBJ,IAAI,CAACK,EAAvB,CAAR,UAAsCL,IAAI,CAACM,KAA3C,EADF,EADF,CAIGL,OAJH,CAKGA,OAAO,CAACC,MAAR,CAAiB,GAAjB,cACC,UAAG,SAAS,CAAC,eAAb,uBACE,KAAC,IAAD,EACE,SAAS,CAAC,wBADZ,CAEE,EAAE,wBAAkBF,IAAI,CAACK,EAAvB,CAFJ,uBADF,EADD,CAUC,EAfJ,GALF,cAuBE,aAAK,SAAS,CAAC,aAAf,kCAEE,KAAC,IAAD,EAAM,EAAE,mBAAaL,IAAI,CAACO,MAAlB,CAAR,UAAqCP,IAAI,CAACO,MAA1C,EAFF,GAvBF,GADF,EAA+BP,IAAI,CAACK,EAApC,CADF,CAgCD,CAzCF,CADH,EADF,EADF,EADF,CAkDD,CApED,CAsEA,cAAerB,CAAAA,QAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\n\r\nconst PostList = function (props) {\r\n  const [posts, setPosts] = useState([]);\r\n\r\n  function fetchData() {\r\n    // const res = await fetch(\"http://localhost:3000/posts\");\r\n    // const data = await res.json();\r\n\r\n    // return setPosts(data);\r\n    axios.get(`${props.apiurl}posts`).then((res) => {\r\n      const pdata = res.data;\r\n      return setPosts(pdata);\r\n    });\r\n  }\r\n  useEffect(() => {\r\n    fetchData();\r\n    console.log(\"after posts\" + posts);\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <div className=\"container\">\r\n        <div class=\"row\">\r\n          {posts\r\n            .slice(0)\r\n            .reverse()\r\n            .map((item) => {\r\n              let content = item.content;\r\n              console.log(content.length);\r\n              if (content.length > 100) {\r\n                content = content.substr(0, 100) + \"...\";\r\n              }\r\n              return (\r\n                <div className=\"col-md-4\" key={item.id}>\r\n                  <article className=\"card mb-4\">\r\n                    <div className=\"card-header p-0\">\r\n                      {/* <Link to={`edit-post/:${item.id}/:${item.title}/:${item.content}`}>edit</Link> */}\r\n                      <img className=\"img-fluid\" src={item.thumbnail} alt=\"\" />\r\n                    </div>\r\n                    <div className=\"card-body article-content\">\r\n                      <h2 className=\"h4 post-title\">\r\n                        <Link to={`post-detail/:${item.id}`}>{item.title}</Link>\r\n                      </h2>\r\n                      {content}\r\n                      {content.length > 100 ? (\r\n                        <p className=\"text-end mt-3\">\r\n                          <Link\r\n                            className=\"btn btn-primary btn-sm\"\r\n                            to={`post-detail/:${item.id}`}\r\n                          >\r\n                            Read More\r\n                          </Link>\r\n                        </p>\r\n                      ) : (\r\n                        \"\"\r\n                      )}\r\n                    </div>\r\n                    <div className=\"card-footer\">\r\n                      Author:\r\n                      <Link to={`author/:${item.author}`}>{item.author}</Link>\r\n                    </div>\r\n                  </article>\r\n                </div>\r\n              );\r\n            })}\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default PostList;\r\n"]},"metadata":{},"sourceType":"module"}