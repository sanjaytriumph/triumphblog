(this.webpackJsonptriumphblog=this.webpackJsonptriumphblog||[]).push([[0],{34:function(e,t,c){},36:function(e,t,c){},61:function(e,t,c){"use strict";c.r(t);var s=c(1),a=c.n(s),n=c(28),r=c.n(n),l=(c(34),c(3)),i=(c(35),c(36),c(4)),d=c(2),j=c(6),o=c.n(j),b=c(0),m=function(e){var t=Object(s.useState)([]),c=Object(l.a)(t,2),a=c[0],n=c[1];return Object(s.useEffect)((function(){o.a.get("".concat(e.apiurl,"posts")).then((function(e){var t=e.data;return n(t)})),console.log("after posts"+a)}),[]),Object(b.jsx)(b.Fragment,{children:a.slice(0).reverse().map((function(e){var t=e.content;return console.log(t.length),t.length>100&&(t=t.substr(0,100)+"..."),Object(b.jsxs)("article",{className:"card mb-4",children:[Object(b.jsx)("div",{className:"card-header",children:Object(b.jsx)("h2",{className:"h4",children:Object(b.jsx)(i.b,{to:"post-detail/:".concat(e.id),children:e.title})})}),Object(b.jsxs)("div",{className:"card-body article-content",children:[t,t.length>100?Object(b.jsx)("p",{className:"text-end mt-3",children:Object(b.jsx)(i.b,{className:"btn btn-primary btn-sm",to:"post-detail/:".concat(e.id),children:"Read More"})}):""]})]},e.id)}))})},h=function(e){return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(m,{apiurl:e.apiurl})})},O=a.a.createContext({loggedin:sessionStorage.getItem("loggedIn"),setLoggedin:function(){}}),u=function(){var e=Object(s.useContext)(O),t=e.loggedin;e.setLoggedin;return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light mb-5",children:Object(b.jsxs)("div",{className:"container-fluid",children:[Object(b.jsx)("a",{className:"navbar-brand",href:"#",children:"Navbar"}),Object(b.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(b.jsx)("span",{className:"navbar-toggler-icon"})}),Object(b.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNav",children:Object(b.jsxs)("ul",{className:"navbar-nav ms-auto",children:[Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsx)(i.b,{className:"nav-link active","aria-current":"page",to:"/",children:"Home"})}),"true"==t?Object(b.jsx)(i.b,{className:"nav-link",to:"/admin/dashboard",children:"Dashboard"}):"",Object(b.jsx)("li",{className:"nav-item",children:"true"==t?Object(b.jsx)(i.b,{className:"nav-link",to:"/logout",children:"Logout"}):Object(b.jsx)(i.b,{className:"nav-link",to:"/login",children:"Login"})})]})})]})})})},x=function(e){var t=Object(s.useState)([]),c=Object(l.a)(t,2),a=c[0],n=c[1],r="http://localhost:3000/posts?id="+Object(d.g)().id.replace(":","");return Object(s.useEffect)((function(){o.a.get(r).then((function(e){var t=e.data;return n(t)}))}),[]),Object(b.jsx)(b.Fragment,{children:a.map((function(e){return Object(b.jsxs)("article",{className:"card mb-4",children:[Object(b.jsx)("div",{className:"card-header",children:Object(b.jsx)("h2",{className:"h4",children:e.title})}),Object(b.jsx)("div",{className:"card-body article-content",children:e.content})]},e.id)}))})},g=c(12),p=c(11),v=function(){var e=Object(s.useState)([]),t=Object(l.a)(e,2),c=(t[0],t[1]),a=Object(s.useState)({postTitle:"",postContent:""}),n=Object(l.a)(a,2),r=n[0],i=n[1],j=Object(s.useState)(!1),m=Object(l.a)(j,2),h=m[0],O=m[1],u=function(e){i(Object(p.a)(Object(p.a)({},r),{},Object(g.a)({},e.target.name,e.target.value)))};return h?Object(b.jsx)(d.a,{push:!0,to:{pathname:"/"}}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h2",{className:"mb-5",children:"Add Blog Post Here"}),Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t={title:r.postTitle,content:r.postContent};o.a.post("http://localhost:3000/posts",t).then((function(e){O(!0);var t=e.data;return c(t)}))},children:[Object(b.jsxs)("div",{className:"form-group mb-4",children:[Object(b.jsx)("labe",{children:"Blog title"}),Object(b.jsx)("input",{type:"text",name:"postTitle",className:"form-control",required:!0,onChange:u})]}),Object(b.jsxs)("div",{className:"form-group mb-4",children:[Object(b.jsx)("labe",{children:"Blog content"}),Object(b.jsx)("textarea",{name:"postContent",className:"form-control",required:!0,onChange:u})]}),Object(b.jsx)("p",{className:"text-end",children:Object(b.jsx)("button",{className:"btn btn-info",children:"Submit Post"})})]})]})},f=function(){var e=Object(s.useState)([]),t=Object(l.a)(e,2),c=(t[0],t[1]),a=Object(d.g)().id.replace(":",""),n=Object(s.useState)(!1),r=Object(l.a)(n,2),i=r[0],j=r[1],m="http://localhost:3000/posts/"+a;return Object(s.useEffect)((function(){o.a.delete(m).then((function(e){j(!0);var t=e.data;return c(t)}))}),[]),i?Object(b.jsx)(d.a,{push:!0,to:{pathname:"/"}}):Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{className:"text-center",children:Object(b.jsx)("div",{className:"spinner-border text-danger",role:"status",children:Object(b.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})})},N=function(){var e=Object(s.useContext)(O),t=(e.loggedin,e.setLoggedin),c=Object(s.useState)(!1),a=Object(l.a)(c,2),n=a[0],r=a[1],i=Object(s.useState)({username:"",password:""}),j=Object(l.a)(i,2),m=j[0],h=j[1],u=Object(s.useState)(!1),x=Object(l.a)(u,2),v=x[0],f=x[1],N=Object(s.useState)(""),S=Object(l.a)(N,2),y=S[0],w=S[1],C=function(e){var t=e.target.id;document.getElementById(t).classList.remove("is-invalid"),h(Object(p.a)(Object(p.a)({},m),{},Object(g.a)({},e.target.name,e.target.value)))};return n?Object(b.jsx)(d.a,{push:!0,to:{pathname:"/admin/dashboard"}}):Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{className:"row justify-content-center",children:Object(b.jsx)("div",{className:"col-md-6",children:Object(b.jsxs)("div",{className:"card",children:[Object(b.jsxs)("h5",{className:"card-header",children:["Login ",Object(b.jsx)("small",{className:"h6",children:"(username: sanjaykumar, password: sanjay123)"})," "]}),Object(b.jsxs)("div",{className:"card-body",children:[v?Object(b.jsx)("div",{className:"alert alert-danger",children:y}):"",Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault(),m.username&&m.password?(console.log("submitted with the values ".concat(m.username," and ").concat(m.password)),o.a.get("http://localhost:3000/login").then((function(e){e.data.map((function(e,c){e.username==m.username&&e.password==m.password?(console.log("good to go"),sessionStorage.setItem("loggedIn","true"),sessionStorage.setItem("username",e.name),r(!0),t(sessionStorage.getItem("loggedIn"))):(f(!0),w("Invalid Credentials"))}))}))):(f(!0),w("Please enter username and password")),0==m.username&&document.getElementById("username").classList.add("is-invalid"),0==m.password&&document.getElementById("password").classList.add("is-invalid")},children:[Object(b.jsxs)("div",{className:"mb-3",children:[Object(b.jsx)("label",{for:"username",className:"form-label",children:"Username"}),Object(b.jsx)("input",{autoComplete:"off",type:"text",className:"form-control",id:"username","aria-describedby":"usernameHelp",name:"username",onChange:C})]}),Object(b.jsxs)("div",{className:"mb-3",children:[Object(b.jsx)("label",{for:"exampleInputPassword1",className:"form-label",children:"Password"}),Object(b.jsx)("input",{autoComplete:"off",type:"password",className:"form-control",id:"password",name:"password",onChange:C})]}),Object(b.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"})]})]})]})})})})},S=function(){var e=Object(s.useContext)(O),t=(e.loggedin,e.setLoggedin);sessionStorage.removeItem("loggedIn"),sessionStorage.removeItem("username"),Object(s.useEffect)((function(){t("false")}),[]);return Object(b.jsx)(d.a,{push:!0,to:{pathname:"/"}})},y=function(){return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("ul",{className:"list-group",children:[Object(b.jsxs)("li",{className:"list-group-item","aria-current":"true",children:["Dashboard",Object(b.jsx)("ul",{children:Object(b.jsxs)("li",{children:[" ",Object(b.jsx)(i.c,{to:"/admin/dashboard",children:"Home"})]})})]}),Object(b.jsxs)("li",{className:"list-group-item",children:["Posts",Object(b.jsxs)("ul",{children:[Object(b.jsxs)("li",{children:[" ",Object(b.jsx)(i.c,{to:"/admin/all-posts",children:"All Posts"})]}),Object(b.jsxs)("li",{children:[" ",Object(b.jsx)(i.c,{to:"/admin/add-new-post",children:"Add New Post"})]})]})]})]})})},w=function(){var e=sessionStorage.getItem("username");return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"col-md-3",children:Object(b.jsx)(y,{})}),Object(b.jsx)("div",{className:"col-md-9",children:Object(b.jsxs)("div",{className:"card",children:[Object(b.jsx)("div",{className:"card-header",children:"Dashboard"}),Object(b.jsx)("div",{className:"card-body",children:Object(b.jsxs)("h2",{children:["Welcome, ",e]})})]})})]})})},C=function(){return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"col-md-3",children:Object(b.jsx)(y,{})}),Object(b.jsx)("div",{className:"col-md-9",children:Object(b.jsxs)("div",{className:"card",children:[Object(b.jsx)("div",{className:"card-header",children:"Add New Post"}),Object(b.jsx)("div",{className:"card-body",children:Object(b.jsx)(v,{})})]})})]})})},I=function(){var e=Object(s.useState)([]),t=Object(l.a)(e,2),c=t[0],a=t[1];return Object(s.useEffect)((function(){o.a.get("http://localhost:3000/posts").then((function(e){var t=e.data;return a(t)})),console.log("after posts"+c)}),[]),Object(b.jsx)(b.Fragment,{children:c.slice(0).reverse().map((function(e){return Object(b.jsx)("article",{className:"card mb-4",children:Object(b.jsxs)("div",{className:"card-header",children:[Object(b.jsx)("h2",{className:"h4",children:Object(b.jsx)(i.b,{to:"edit-post/:".concat(e.id),children:e.title})}),Object(b.jsx)(i.b,{to:"edit-post/:".concat(e.id),children:" Edit"}),Object(b.jsx)(i.b,{to:"delete-post/:".concat(e.id),children:" Delete"})]})},e.id)}))})},F=function(){return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"col-md-3",children:Object(b.jsx)(y,{})}),Object(b.jsx)("div",{className:"col-md-9",children:Object(b.jsxs)("div",{className:"card",children:[Object(b.jsx)("div",{className:"card-header",children:"Add New Post"}),Object(b.jsx)("div",{className:"card-body",children:Object(b.jsx)(I,{})})]})})]})})},P=function(e){var t=Object(s.useState)(!1),c=Object(l.a)(t,2),a=c[0],n=c[1],r=Object(s.useState)({}),i=Object(l.a)(r,2),j=i[0],m=i[1],h=Object(s.useState)(),O=Object(l.a)(h,2),u=O[0],x=O[1],v=Object(d.g)().id.replace(":","");console.log(v);Object(s.useEffect)((function(){o.a.get("http://localhost:3000/posts/"+v).then((function(e){var t=e.data;return m(t)}))}),[]);var f=function(e){x(Object(p.a)(Object(p.a)({},u),{},Object(g.a)({},e.target.name,e.target.value)))};return a?Object(b.jsx)(d.a,{push:!0,to:{pathname:"/"}}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h2",{className:"mb-5",children:"Edit Blog Post Here"}),Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault(),console.log("submitted"),o.a.patch("http://localhost:3000/posts/"+v,{title:u.postTitle,content:u.postContent}).then((function(e){n(!0);var t=e.data;return console.log(t),m(t)}))},children:[Object(b.jsxs)("div",{className:"form-group mb-4",children:[Object(b.jsx)("labe",{children:"Blog title"}),Object(b.jsx)("input",{type:"text",name:"postTitle",className:"form-control",required:!0,defaultValue:j.title,onChange:f})]}),Object(b.jsxs)("div",{className:"form-group mb-4",children:[Object(b.jsx)("labe",{children:"Blog content"}),Object(b.jsx)("textarea",{name:"postContent",className:"form-control",required:!0,defaultValue:j.content,onChange:f})]}),Object(b.jsx)("p",{className:"text-end",children:Object(b.jsx)("button",{className:"btn btn-info",children:"Submit Post"})})]})]})},L=function(){return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"col-md-3",children:Object(b.jsx)(y,{})}),Object(b.jsx)("div",{className:"col-md-9",children:Object(b.jsxs)("div",{className:"card",children:[Object(b.jsx)("div",{className:"card-header",children:"Edit Post"}),Object(b.jsx)("div",{className:"card-body",children:Object(b.jsx)(P,{})})]})})]})})},E=function(){return Object(b.jsx)("div",{className:"card",children:Object(b.jsx)("div",{className:"card-body",children:Object(b.jsx)("h3",{className:"text-center",children:"This page could not be found"})})})};var B=function(){var e=Object(s.useState)(sessionStorage.getItem("loggedIn")),t=Object(l.a)(e,2),c=t[0],a={loggedin:c,setLoggedin:t[1]};console.log(c);var n="";return n="https://my-json-server.typicode.com/sanjaytriumph/mockjson/",Object(b.jsx)(O.Provider,{value:a,children:Object(b.jsx)(i.a,{children:Object(b.jsxs)("div",{className:"container",children:[Object(b.jsx)(u,{}),Object(b.jsxs)(d.d,{children:[Object(b.jsx)(d.b,{exact:!0,path:"/",children:Object(b.jsx)(h,{apiurl:n})}),Object(b.jsx)(d.b,{exact:!0,path:"/post-detail/:id",children:Object(b.jsx)(x,{})}),Object(b.jsx)(d.b,{exact:!0,path:"/add-post",children:Object(b.jsx)(v,{})}),Object(b.jsx)(d.b,{exact:!0,path:"/login",children:Object(b.jsx)(N,{})}),Object(b.jsx)(d.b,{exact:!0,path:"/logout",children:Object(b.jsx)(S,{})}),c?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(d.b,{exact:!0,path:"/admin/dashboard",children:Object(b.jsx)(w,{})}),Object(b.jsx)(d.b,{exact:!0,path:"/admin/add-new-post",children:Object(b.jsx)(C,{})}),Object(b.jsx)(d.b,{exact:!0,path:"/admin/all-posts",children:Object(b.jsx)(F,{})}),Object(b.jsx)(d.b,{exact:!0,path:"/admin/edit-post/:id",children:Object(b.jsx)(L,{})}),Object(b.jsx)(d.b,{exact:!0,path:"/admin/delete-post/:id",children:Object(b.jsx)(f,{})})]}):"",Object(b.jsx)(d.b,{component:E})]})]})})})},T=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,62)).then((function(t){var c=t.getCLS,s=t.getFID,a=t.getFCP,n=t.getLCP,r=t.getTTFB;c(e),s(e),a(e),n(e),r(e)}))};r.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(B,{})}),document.getElementById("root")),T()}},[[61,1,2]]]);
//# sourceMappingURL=main.e0abcd99.chunk.js.map