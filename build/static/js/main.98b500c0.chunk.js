(this.webpackJsonptriumphblog=this.webpackJsonptriumphblog||[]).push([[0],{34:function(e,t,a){},36:function(e,t,a){},61:function(e,t,a){"use strict";a.r(t);var c=a(1),s=a.n(c),n=a(28),r=a.n(n),l=(a(34),a(4)),i=(a(35),a(36),a(3)),o=a(2),d=a(6),j=a.n(d),b=a(0),m=function(e){var t=Object(c.useState)([]),a=Object(l.a)(t,2),s=a[0],n=a[1];return Object(c.useEffect)((function(){j.a.get("".concat(e.apiurl,"posts")).then((function(e){var t=e.data;return n(t)})),console.log("after posts"+s)}),[]),Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{className:"container",children:Object(b.jsx)("div",{class:"row",children:s.slice(0).reverse().map((function(e){var t=e.content;return console.log(t.length),t.length>100&&(t=t.substr(0,100)+"..."),Object(b.jsx)("div",{className:"col-md-4",children:Object(b.jsxs)("article",{className:"card mb-4",children:[Object(b.jsx)("div",{className:"card-header p-0",children:Object(b.jsx)("img",{className:"img-fluid",src:e.thumbnail,alt:""})}),Object(b.jsxs)("div",{className:"card-body article-content",children:[Object(b.jsx)("h2",{className:"h4 post-title",children:Object(b.jsx)(i.b,{to:"post-detail/:".concat(e.id),children:e.title})}),t,t.length>100?Object(b.jsx)("p",{className:"text-end mt-3",children:Object(b.jsx)(i.b,{className:"btn btn-primary btn-sm",to:"post-detail/:".concat(e.id),children:"Read More"})}):""]}),Object(b.jsxs)("div",{className:"card-footer",children:["Author:",Object(b.jsx)(i.b,{to:"author/:".concat(e.author),children:e.author})]})]})},e.id)}))})})})},h=function(e){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"banner",children:Object(b.jsxs)("div",{className:"container",children:[Object(b.jsx)("p",{children:"Hello Welcome to"}),Object(b.jsx)("h1",{children:"Triumph Blog"}),Object(b.jsx)("p",{children:"It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution"})]})}),Object(b.jsx)(m,{apiurl:e.apiurl})]})},u=s.a.createContext({loggedin:sessionStorage.getItem("loggedIn"),setLoggedin:function(){}}),O=function(){var e=Object(c.useContext)(u),t=e.loggedin;e.setLoggedin;return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light fixed-top",children:Object(b.jsxs)("div",{className:"container-fluid",children:[Object(b.jsx)("a",{className:"navbar-brand",href:"#",children:"Navbar"}),Object(b.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(b.jsx)("span",{className:"navbar-toggler-icon"})}),Object(b.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNav",children:Object(b.jsxs)("ul",{className:"navbar-nav ms-auto",children:[Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsx)(i.b,{className:"nav-link active","aria-current":"page",to:"/",children:"Home"})}),"true"==t?Object(b.jsx)(i.b,{className:"nav-link",to:"/admin/dashboard",children:"Dashboard"}):"",Object(b.jsx)("li",{className:"nav-item",children:"true"==t?Object(b.jsx)(i.b,{className:"nav-link",to:"/logout",children:"Logout"}):Object(b.jsx)(i.b,{className:"nav-link",to:"/login",children:"Login"})})]})})]})})})},x=function(e){var t=Object(c.useState)([]),a=Object(l.a)(t,2),s=a[0],n=a[1],r=Object(o.g)().id.replace(":",""),i="".concat(e.apiurl,"posts?id=").concat(r);return Object(c.useEffect)((function(){j.a.get(i).then((function(e){var t=e.data;return n(t)}))}),[]),Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{className:"container pt-3",children:s.map((function(e){return Object(b.jsxs)("article",{className:"card mb-4",children:[Object(b.jsx)("img",{src:e.thumbnail,alt:""}),Object(b.jsx)("div",{className:"card-header",children:Object(b.jsx)("h2",{className:"h4",children:e.title})}),Object(b.jsx)("div",{className:"card-body article-content",children:e.content})]},e.id)}))})})},p=a(12),g=a(11),v=function(e){var t=Object(c.useState)([]),a=Object(l.a)(t,2),s=(a[0],a[1]),n=Object(c.useState)({postTitle:"",postContent:"",postThumbnail:""}),r=Object(l.a)(n,2),i=r[0],d=r[1],m=Object(c.useState)(!1),h=Object(l.a)(m,2),u=h[0],O=h[1],x=function(e){d(Object(g.a)(Object(g.a)({},i),{},Object(p.a)({},e.target.name,e.target.value)))};return u?Object(b.jsx)(o.a,{push:!0,to:{pathname:"/"}}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h2",{className:"mb-5",children:"Add Blog Post Here"}),Object(b.jsxs)("form",{onSubmit:function(t){t.preventDefault();var a={title:i.postTitle,content:i.postContent,thumbnail:i.postThumbnail,author:sessionStorage.getItem("username")};console.log(a),j.a.post("".concat(e.apiurl,"posts"),a).then((function(e){O(!0);var t=e.data;return s(t)}))},children:[Object(b.jsxs)("div",{className:"form-group mb-4",children:[Object(b.jsx)("label",{children:"Blog title"}),Object(b.jsx)("input",{type:"text",name:"postTitle",className:"form-control",required:!0,onChange:x})]}),Object(b.jsxs)("div",{className:"form-group mb-4",children:[Object(b.jsx)("label",{children:"Blog content"}),Object(b.jsx)("textarea",{name:"postContent",className:"form-control",required:!0,onChange:x})]}),Object(b.jsxs)("div",{className:"form-group mb-4",children:[Object(b.jsx)("label",{children:'Blog thumbnail URL ("Eg: https://picsum.photos/id/1/900/500")'}),Object(b.jsx)("input",{type:"url",name:"postThumbnail",className:"form-control",required:!0,onChange:x})]}),Object(b.jsx)("p",{className:"text-end",children:Object(b.jsx)("button",{className:"btn btn-info",children:"Submit Post"})})]})]})},N=function(e){var t=Object(c.useState)([]),a=Object(l.a)(t,2),s=(a[0],a[1]),n=Object(o.g)().id.replace(":",""),r=Object(c.useState)(!1),i=Object(l.a)(r,2),d=i[0],m=i[1],h="".concat(e.apiurl,"posts/").concat(n);return Object(c.useEffect)((function(){j.a.delete(h).then((function(e){m(!0);var t=e.data;return s(t)}))}),[]),d?Object(b.jsx)(o.a,{push:!0,to:{pathname:"/"}}):Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{className:"text-center",children:Object(b.jsx)("div",{className:"spinner-border text-danger",role:"status",children:Object(b.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})})},f=function(e){var t=Object(c.useState)([]),a=Object(l.a)(t,2),s=a[0],n=a[1],r=Object(o.g)().author.replace(":",""),d="".concat(e.apiurl,"posts?author=").concat(r);return Object(c.useEffect)((function(){j.a.get(d).then((function(e){var t=e.data;return n(t)}))}),[]),Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{className:"container pt-3",children:Object(b.jsx)("div",{className:"row",children:s.slice(0).reverse().map((function(e){var t=e.content;return console.log(t.length),t.length>100&&(t=t.substr(0,100)+"..."),Object(b.jsx)("div",{className:"col-md-4",children:Object(b.jsxs)("article",{className:"card mb-4",children:[Object(b.jsx)("div",{className:"card-header p-0",children:Object(b.jsx)("img",{className:"img-fluid",src:e.thumbnail,alt:""})}),Object(b.jsxs)("div",{className:"card-body article-content",children:[Object(b.jsx)("h2",{className:"h4 post-title",children:Object(b.jsx)(i.b,{to:"post-detail/:".concat(e.id),children:e.title})}),t,t.length>100?Object(b.jsx)("p",{className:"text-end mt-3",children:Object(b.jsx)(i.b,{className:"btn btn-primary btn-sm",to:"/post-detail/:".concat(e.id),children:"Read More"})}):""]}),Object(b.jsxs)("div",{className:"card-footer",children:["Author:",Object(b.jsx)(i.b,{to:"/author/:".concat(e.author),children:e.author})]})]})},e.id)}))})})})},S=function(e){var t=Object(c.useContext)(u),a=(t.loggedin,t.setLoggedin),s=Object(c.useState)(!1),n=Object(l.a)(s,2),r=n[0],i=n[1],d=Object(c.useState)({username:"",password:""}),m=Object(l.a)(d,2),h=m[0],O=m[1],x=Object(c.useState)(!1),v=Object(l.a)(x,2),N=v[0],f=v[1],S=Object(c.useState)(""),y=Object(l.a)(S,2),w=y[0],I=y[1],C=function(e){var t=e.target.id;document.getElementById(t).classList.remove("is-invalid"),O(Object(g.a)(Object(g.a)({},h),{},Object(p.a)({},e.target.name,e.target.value)))};return r?Object(b.jsx)(o.a,{push:!0,to:{pathname:"/admin/dashboard"}}):Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{className:"container pt-3",children:Object(b.jsx)("div",{className:"row justify-content-center",children:Object(b.jsx)("div",{className:"col-md-6",children:Object(b.jsxs)("div",{className:"card",children:[Object(b.jsxs)("h5",{className:"card-header",children:["Login"," ",Object(b.jsx)("small",{className:"h6",children:"(username: sanjaykumar, password: sanjay123)"})," "]}),Object(b.jsxs)("div",{className:"card-body",children:[N?Object(b.jsx)("div",{className:"alert alert-danger",children:w}):"",Object(b.jsxs)("form",{onSubmit:function(t){t.preventDefault(),h.username&&h.password?(console.log("submitted with the values ".concat(h.username," and ").concat(h.password)),j.a.get("".concat(e.apiurl,"login")).then((function(e){e.data.map((function(e,t){e.username==h.username&&e.password==h.password?(console.log("good to go"),sessionStorage.setItem("loggedIn","true"),sessionStorage.setItem("username",e.username),sessionStorage.setItem("role",e.role),i(!0),a(sessionStorage.getItem("loggedIn"))):(f(!0),I("Invalid Credentials"))}))}))):(f(!0),I("Please enter username and password")),0==h.username&&document.getElementById("username").classList.add("is-invalid"),0==h.password&&document.getElementById("password").classList.add("is-invalid")},children:[Object(b.jsxs)("div",{className:"mb-3",children:[Object(b.jsx)("label",{for:"username",className:"form-label",children:"Username"}),Object(b.jsx)("input",{autoComplete:"off",type:"text",className:"form-control",id:"username","aria-describedby":"usernameHelp",name:"username",onChange:C})]}),Object(b.jsxs)("div",{className:"mb-3",children:[Object(b.jsx)("label",{for:"exampleInputPassword1",className:"form-label",children:"Password"}),Object(b.jsx)("input",{autoComplete:"off",type:"password",className:"form-control",id:"password",name:"password",onChange:C})]}),Object(b.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"})]})]})]})})})})})},y=function(){var e=Object(c.useContext)(u),t=(e.loggedin,e.setLoggedin);sessionStorage.removeItem("loggedIn"),sessionStorage.removeItem("username"),sessionStorage.removeItem("role"),Object(c.useEffect)((function(){t("false")}),[]);return Object(b.jsx)(o.a,{push:!0,to:{pathname:"/"}})},w=function(){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"userdata",children:sessionStorage.getItem("username")}),Object(b.jsxs)("ul",{className:"list-group",children:[Object(b.jsxs)("li",{className:"list-group-item","aria-current":"true",children:["Dashboard",Object(b.jsx)("ul",{children:Object(b.jsxs)("li",{children:[" ",Object(b.jsx)(i.c,{to:"/admin/dashboard",children:"Home"})]})})]}),Object(b.jsxs)("li",{className:"list-group-item",children:["Posts",Object(b.jsxs)("ul",{children:[Object(b.jsxs)("li",{children:[" ",Object(b.jsx)(i.c,{to:"/admin/all-posts",children:"All Posts"})]}),Object(b.jsxs)("li",{children:[" ",Object(b.jsx)(i.c,{to:"/admin/add-new-post",children:"Add New Post"})]})]})]})]})]})},I=function(){var e=sessionStorage.getItem("username");return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{className:"container-fluid",children:Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"col-md-3 dashboardmenu-col pt-3",children:Object(b.jsx)(w,{})}),Object(b.jsx)("div",{className:"col-md-9 dashboarditem-col pt-3",children:Object(b.jsxs)("div",{className:"card",children:[Object(b.jsx)("div",{className:"card-header",children:"Dashboard"}),Object(b.jsx)("div",{className:"card-body",children:Object(b.jsxs)("h2",{children:["Welcome, ",e]})})]})})]})})})},C=function(e){return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{className:"container-fluid",children:Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"col-md-3 dashboardmenu-col pt-3",children:Object(b.jsx)(w,{})}),Object(b.jsx)("div",{className:"col-md-9 dashboarditem-col pt-3",children:Object(b.jsxs)("div",{className:"card",children:[Object(b.jsx)("div",{className:"card-header",children:"Add New Post"}),Object(b.jsx)("div",{className:"card-body",children:Object(b.jsx)(v,{apiurl:e.apiurl})})]})})]})})})},F=function(e){var t=Object(c.useState)([]),a=Object(l.a)(t,2),s=a[0],n=a[1];return Object(c.useEffect)((function(){"user"===sessionStorage.getItem("role")?j.a.get("".concat(e.apiurl,"posts?author=").concat(sessionStorage.getItem("username"))).then((function(e){var t=e.data;return n(t)})):j.a.get("".concat(e.apiurl,"posts")).then((function(e){var t=e.data;return n(t)})),console.log("after posts"+s)}),[]),Object(b.jsx)(b.Fragment,{children:s.slice(0).reverse().map((function(e){return Object(b.jsx)("article",{className:"card mb-4",children:Object(b.jsxs)("div",{className:"card-header",children:[Object(b.jsx)("h2",{className:"h4 post-title",children:Object(b.jsx)(i.b,{to:"edit-post/:".concat(e.id),children:e.title})}),Object(b.jsx)(i.b,{to:"edit-post/:".concat(e.id),children:" Edit"})," \xa0",Object(b.jsx)(i.b,{to:"delete-post/:".concat(e.id),children:" Delete"})]})},e.id)}))})},L=function(e){return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{className:"container-fluid",children:Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"col-md-3 dashboardmenu-col pt-3",children:Object(b.jsx)(w,{})}),Object(b.jsx)("div",{className:"col-md-9 pt-3 dashboarditem-col",children:Object(b.jsxs)("div",{className:"card",children:[Object(b.jsx)("div",{className:"card-header",children:"Add New Post"}),Object(b.jsx)("div",{className:"card-body",children:Object(b.jsx)(F,{apiurl:e.apiurl})})]})})]})})})},P=function(e){var t=Object(c.useState)(!1),a=Object(l.a)(t,2),s=a[0],n=a[1],r=Object(c.useState)({}),i=Object(l.a)(r,2),d=i[0],m=i[1],h=Object(c.useState)(),u=Object(l.a)(h,2),O=u[0],x=u[1],v=Object(o.g)().id.replace(":","");console.log(v),console.log(e);Object(c.useEffect)((function(){j.a.get("".concat(e.apiurl,"posts/").concat(v)).then((function(e){var t=e.data;return m(t)}))}),[]);var N=function(e){x(Object(g.a)(Object(g.a)({},O),{},Object(p.a)({},e.target.name,e.target.value)))};return s?Object(b.jsx)(o.a,{push:!0,to:{pathname:"/"}}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h2",{className:"mb-5",children:"Edit Blog Post Here"}),Object(b.jsxs)("form",{onSubmit:function(t){t.preventDefault(),console.log("submitted"),j.a.patch("".concat(e.apiurl,"posts/").concat(v),{title:O.postTitle,content:O.postContent,thumbnail:O.postThumbnail}).then((function(e){n(!0);var t=e.data;return console.log(t),m(t)}))},children:[Object(b.jsxs)("div",{className:"form-group mb-4",children:[Object(b.jsx)("labe",{children:"Blog title"}),Object(b.jsx)("input",{type:"text",name:"postTitle",className:"form-control",required:!0,defaultValue:d.title,onChange:N})]}),Object(b.jsxs)("div",{className:"form-group mb-4",children:[Object(b.jsx)("labe",{children:"Blog content"}),Object(b.jsx)("textarea",{name:"postContent",className:"form-control",required:!0,defaultValue:d.content,onChange:N})]}),Object(b.jsxs)("div",{className:"form-group mb-4",children:[Object(b.jsx)("labe",{children:"Blog thumbnail URL"}),Object(b.jsx)("input",{type:"text",name:"postThumbnail",className:"form-control",required:!0,defaultValue:d.thumbnail,onChange:N})]}),Object(b.jsx)("p",{className:"text-end",children:Object(b.jsx)("button",{className:"btn btn-info",children:"Submit Post"})})]})]})},T=function(e){return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{class:"container-fluid",children:Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"col-md-3 dashboardmenu-col pt-3",children:Object(b.jsx)(w,{})}),Object(b.jsx)("div",{className:"col-md-9 dashboarditem-col pt-3",children:Object(b.jsxs)("div",{className:"card",children:[Object(b.jsx)("div",{className:"card-header",children:"Edit Post"}),Object(b.jsx)("div",{className:"card-body",children:Object(b.jsx)(P,{apiurl:e.apiurl})})]})})]})})})},E=function(){return Object(b.jsx)("div",{className:"card",children:Object(b.jsx)("div",{className:"card-body",children:Object(b.jsx)("h3",{className:"text-center",children:"This page could not be found"})})})};var B=function(){var e=Object(c.useState)(sessionStorage.getItem("loggedIn")),t=Object(l.a)(e,2),a=t[0],s={loggedin:a,setLoggedin:t[1]};console.log(a);var n="";return n="https://my-json-server.typicode.com/sanjaytriumph/mockjson/",Object(b.jsx)(u.Provider,{value:s,children:Object(b.jsxs)(i.a,{children:[Object(b.jsx)("div",{className:"container-fluid",children:Object(b.jsx)("div",{className:"row",children:Object(b.jsx)(O,{})})}),Object(b.jsxs)(o.d,{children:[Object(b.jsx)(o.b,{exact:!0,path:"/",children:Object(b.jsx)(h,{apiurl:n})}),Object(b.jsx)(o.b,{exact:!0,path:"/post-detail/:id",children:Object(b.jsx)(x,{apiurl:n})}),Object(b.jsx)(o.b,{exact:!0,path:"/add-post",children:Object(b.jsx)(v,{})}),Object(b.jsx)(o.b,{exact:!0,path:"/author/:author",children:Object(b.jsx)(f,{apiurl:n})}),Object(b.jsx)(o.b,{exact:!0,path:"/login",children:Object(b.jsx)(S,{apiurl:n})}),Object(b.jsx)(o.b,{exact:!0,path:"/logout",children:Object(b.jsx)(y,{})}),a?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(o.b,{exact:!0,path:"/admin/dashboard",children:Object(b.jsx)(I,{})}),Object(b.jsx)(o.b,{exact:!0,path:"/admin/add-new-post",children:Object(b.jsx)(C,{apiurl:n})}),Object(b.jsx)(o.b,{exact:!0,path:"/admin/all-posts",children:Object(b.jsx)(L,{apiurl:n})}),Object(b.jsx)(o.b,{exact:!0,path:"/admin/edit-post/:id",children:Object(b.jsx)(T,{apiurl:n})}),Object(b.jsx)(o.b,{exact:!0,path:"/admin/delete-post/:id",children:Object(b.jsx)(N,{apiurl:n})})]}):"",Object(b.jsx)(o.b,{component:E})]})]})})},k=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,62)).then((function(t){var a=t.getCLS,c=t.getFID,s=t.getFCP,n=t.getLCP,r=t.getTTFB;a(e),c(e),s(e),n(e),r(e)}))};r.a.render(Object(b.jsx)(s.a.StrictMode,{children:Object(b.jsx)(B,{})}),document.getElementById("root")),k()}},[[61,1,2]]]);
//# sourceMappingURL=main.98b500c0.chunk.js.map